<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<link rel="stylesheet" th:href="@{/css/header.css}">
	<link rel="stylesheet" th:href="@{/css/footer.css}">
	<link rel="stylesheet" th:href="@{/js/includeHTML.js}">
	<link rel="stylesheet" th:href="@{/css/dr_main.css}">
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	<title>Document</title>
</head>

<body>
	<header th:replace="~{/include/header.html}"></header>
	<div class="dri_main">
		<div class="dri_title">
			<p>
				<a th:href="@{/admin/adminview}" style="color: black;  text-decoration: none;">
					<img src="/images/return.png" style="width: 30px;">
					<strong>기사 상품 조회</strong></a>
			</p>
		</div>

		<form action="" class="dri-search-bar">
			<p><strong>검색창</strong></p>
			<input type="search" name="search" pattern=".*\S.*" required placeholder="Search.." />
			<button class="search-btn" type="submit">
				<img src="/images/search2.png" class="search-icon" />
			</button>
		</form>

		<table class="table table-hover">
			<thead>
				<tr>
					<th scope="col">번호</th>

					<th scope="col">일정번호</th>
					<th scope="col">주문날짜</th>
					<th scope="col">방문요청일</th>
					<th scope="col">방문주소</th>
					<th scope="col">회원이름</th>
					<th scope="col">방문타입</th>
					<th scope="col">방문예정일</th>
					<th scope="col">관리</th>
				</tr>
			</thead>

			<tbody>
				<tr th:each="driver, itemStat : ${driver}" :id="'item-' + ${itemStat.index + 1}" class="table-form">
					<th th:text="${itemStat.index + 1}"></th>
					<td th:text="${driver.scheduleId}"></td>
					<td th:text="${driver.orderDate}"></td>
					<td th:text="${driver.requestDate}"></td>
					<td th:text="${driver.orderAddress}"></td>
					<td th:text="${driver.orderName}"></td>
					<td th:if="${driver.visitType == 0}">배송</td>
					<td th:if="${driver.visitType == 2}">수거</td>
					<td th:text="${driver.visitDate}"></td>
					<td>
						<!--방문 전-->
						<form th:if="${driver.visitType == 0 and driver.visitDate == null}" action="/staff/settingDate" method="post">
							<input type="hidden" name="requestDate" th:value="${driver.requestDate}">
							<input type="time" id="appointmentTime" name="visitTime">
							<input type="hidden" th:value="${driver.scheduleId}" name="scheduleId">
							<input type="hidden" th:value="${driver.orderId}" name="orderId">
							<input type="hidden" th:value="${driver.visitType}" name="visitType">
							<button type="submit" class="btn btn-info" data-bs-toggle="modal"
								data-bs-target="#dateModal">
								날짜선택
							</button>
						</form>
						<form th:if="${driver.visitType == 2 and driver.visitDate == null}" action="/staff/settingDate" method="post">
							<input type="hidden" name="requestDate" th:value="${driver.requestDate}">
							<input type="time" id="appointmentTime" name="visitTime">
							<input type="hidden" th:value="${driver.scheduleId}" name="scheduleId">
							<input type="hidden" th:value="${driver.visitType}" name="visitType">
							<button type="submit" class="btn btn-info">
								날짜선택
							</button>
						</form>
						
						
						<!--방문 후-->
						<form th:if="${driver.visitType == 0 and driver.visitDate != null}" action="/staff/completeOrder" method="post">
							<input type="hidden" name="requestDate" th:value="${driver.requestDate}">
							<input type="hidden" th:value="${driver.scheduleId}" name="scheduleId">
							<input type="hidden" th:value="${driver.orderId}" name="orderId">
							<input type="hidden" th:value="${driver.visitType}" name="visitType">
							<button type="submit" class="btn btn-info" data-bs-toggle="modal"
								data-bs-target="#dateModal">
								업무 완료
							</button>
						</form>
						<form th:if="${driver.visitType == 2 and driver.visitDate != null}" action="/staff/completeOrder" method="post">
							<input type="hidden" name="requestDate" th:value="${driver.requestDate}">
							<input type="hidden" th:value="${driver.scheduleId}" name="scheduleId">
							<input type="hidden" th:value="${driver.visitType}" name="visitType">
							<button type="submit" class="btn btn-info">
								업무 완료
							</button>
						</form>
						
						
						
						
						
						
					</td>
				</tr>


			</tbody>
		</table>
	</div>


	<footer th:replace="~{/include/footer.html}"></footer>




	<body>
		<script>




		</script>

</html>