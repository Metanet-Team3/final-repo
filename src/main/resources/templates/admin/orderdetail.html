<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
	<link rel="stylesheet" th:href="@{/css/admin/style.css}">
	<!-- Datepicker 관련 라이브러리 추가 -->
	<link rel="stylesheet"
		href="https://cdn.jsdelivr.net/npm/bootstrap-datepicker@1.9.0/dist/css/bootstrap-datepicker.min.css">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap-datepicker@1.9.0/dist/js/bootstrap-datepicker.min.js"></script>


	<title>주문 리스트</title>
</head>

<body>
    <div class="assignment wrap">
        <div class="flex_1">
            <div class="flex_1_1" th:object="${orderDetail}" >
                <em>주문고객: <span th:text="${orderDetail.orderName}"> 홍길동 </span> 님</em>
                <div class="bo">
                    <div>
                        <ul>
                            <li>제품 모델 :<span th:text="${orderDetail.productModel}">cp-7211N</span></li>
                            <li>제품 이름 :<span th:text="${orderDetail.productName}">아이콘 정수기 2</span></li>
                            <li>약정년 :<span th:text="${orderDetail.contractYear}"></span>년</li>
                            <li>총 가격 :<span th:text="${orderDetail.orderPrice}"></span>원</li>
                            <li>
								월 가격 :
							    <span th:if="${orderDetail.contractYear != 0}" th:text="${(orderDetail.orderPrice / orderDetail.contractYear) / 12 + '원'}"></span>
							    <span th:if="${orderDetail.contractYear == 0}" th:text="${(orderDetail.orderPrice / 12) + '원'}"></span>
							</li>
                            <li>약정기간 :<span th:text="${orderDetail.startDate}"></span>  ~ <span th:text="${orderDetail.endDate}"></span></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="flex_1_2">
                <em>고객 주소</em>
                <div class="bo">
                    <ul>
                        <li>고객명 : <span th:text="${orderDetail.orderName}">김메타</span> 님</li>
                        <li>고객 주소 : <span th:text="${orderDetail.orderAddress}"></span></li>
                        <li>고객 연락처 :<span th:text="${orderDetail.userPhone}"></span></li>
                        <li>요청 사항 :<span th:text="${orderDetail.orderContent}">오시기 전 연락주세요!</span></li>
                    </ul>
                </div>
            </div>
            <div class="flex_1_3">
                <em>설치 희망일</em>
                <div class="bo" th:text="${orderDetail.requestDate}">
                    2020/12/23 14:00
                </div>
            </div>
        </div>
        <div class="flex_2">
            <div class="flex_2_1">
                <em>배정</em>
                <div class="bo">
                    <div class="engineer_box">
                        <h3>설치 기사</h3>
                        <div>
                            <div class="en">
                                <p>김기사</p>
                            </div>
                            <div class="flex_button">
                                <button type="button" class="btn btn-outline-primary" data-toggle="modal" data-target="#myModal">기사 선택</button>
                                <button type="reset" class="btn btn-outline-secondary">초기화</button>
                            </div>
                        </div>
                    </div>
                    <div class="engineer_box">
                        <h3>코디</h3>
                        <div>
                            <div class="en">
                                <p>김코디</p>
                            </div>
                            <div class="flex_button">
                                <button type="button" class="btn btn-outline-primary"  data-toggle="modal" data-target="#myCodiModal">코디 선택</button>
                                <button type="button" class="btn btn-outline-secondary">초기화</button>
                            </div>
                        </div>
                    </div>
                	<button type="button" class="btn btn-primary btn-block">확인</button>
                </div>
            </div>
        </div>
    </div>
    
	    <!-- The Modal -->
	<div class="modal" id="myModal">
	    <div class="modal-dialog">
	      <div class="modal-content">
	  
	        <!-- Modal Header -->
	        <div class="modal-header">
	          <h4 class="modal-title">Modal Heading</h4>
	          <button type="button" class="close" data-dismiss="modal">&times;</button>
	        </div>
	  
	        <!-- Modal body -->
	        <div class="modal-body">
	           <table class="table" th:if="${driverList}">
			    <thead class="table-success">
			      <tr>
			        <th>직원번호</th>
			        <th>이름</th>
			        <th>이메일</th>
			        <th>연락처</th>
			        <th>근무지</th>
			        <th>관리</th>
			      </tr>
			    </thead>
			    <tbody>
			      <tr th:each="driver: ${driverList}">
			        <td th:text="${driver.staffId}">1</td>
			        <td th:text="${driver.userName}">김기사</td>
			        <td th:text="${driver.userEmail}">john@example.com</td>
			        <td th:text="${driver.userPhone}">010-1111-1111</td>
			        <td th:text="${driver.workPlace}">서울</td>
					<td>
					 	<input type="hidden" name="orderId" th:value="${orderDetail.orderId}">
                    	<input type="hidden" name="driverId" th:value="${driver.staffId}">
						<button type="submit" class="btn btn-outline-primary">배정</button>
					</td>
			      </tr>
			    </tbody>
			  </table>
	        </div>
	  
	        <!-- Modal footer -->
	        <div class="modal-footer">
	          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
	        </div>
	      </div>
	    </div>
	  </div>
	      <!-- The Codi Modal -->
	<div class="modal" id="myCodiModal">
	    <div class="modal-dialog">
	      <div class="modal-content">
	  
	        <!-- Modal Header -->
	        <div class="modal-header">
	          <h4 class="modal-title">코디 리스트</h4>
	          <button type="button" class="close" data-dismiss="modal">&times;</button>
	        </div>
	  
	        <!-- Modal body -->
	        <div class="modal-body">
	           <table class="table" th:if="${codiList}">
			    <thead class="table-success">
			      <tr>
			        <th>직원번호</th>
			        <th>이름</th>
			        <th>이메일</th>
			        <th>연락처</th>
			        <th>근무지</th>
			        <th>관리</th>
			      </tr>
			    </thead>
			    <tbody>
			      <tr th:each="codi: ${codiList}">
			        <td th:text="${codi.staffId}">1</td>
			        <td th:text="${codi.userName}">김기사</td>
			        <td th:text="${codi.userEmail}">john@example.com</td>
			        <td th:text="${codi.userPhone}">010-1111-1111</td>
			        <td th:text="${codi.workPlace}">서울</td>
					<td>
					 	<input type="hidden" name="orderId" th:value="${orderDetail.orderId}">
                    	<input type="hidden" name="driverId" th:value="${codi.staffId}">
						<button type="submit" class="btn btn-outline-primary">배정</button>
					</td>
			      </tr>
			    </tbody>
			  </table>
	        </div>
	  
	        <!-- Modal footer -->
	        <div class="modal-footer">
	          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
	        </div>
	      </div>
	    </div>
	  </div>
</body>
<style>

</style>
<script>
</script>

</html>