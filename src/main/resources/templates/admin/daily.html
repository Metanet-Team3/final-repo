<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Visitor Count</title>
</head>
<body>
    <h1>Daily Visitor Count</h1>
    <p>The current daily visitor count is: <span th:text="${dailyVisitorCount}"></span></p>

    <!-- 스크립트를 통해 주기적으로 업데이트 -->
    <script th:inline="javascript">
        /*<![CDATA[*/
        function updateDailyVisitorCount() {
            // AJAX를 사용하여 서버에서 최신 데이터를 가져옴
            fetch('/daily-count-api')
                .then(response => response.json())
                .then(data => {
                    // 최신 데이터로 업데이트
                    document.getElementById('dailyVisitorCount').innerText = data.dailyVisitorCount;
                })
                .catch(error => console.error('Error fetching daily visitor count:', error));
        }

        // 페이지 로드 후 초기 업데이트
        document.addEventListener('DOMContentLoaded', function () {
            updateDailyVisitorCount();

            // 주기적으로 업데이트
            setInterval(updateDailyVisitorCount, 60000); // 1분마다 업데이트 (밀리초 단위)
        });
        /*]]>*/
    </script>
</body>
</html>
