<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
   <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
   <link rel="stylesheet" th:href="@{/css/header.css}">
   <link rel="stylesheet" th:href="@{/css/footer.css}">
   <link rel="stylesheet" th:href="@{/css/profile.css}">
   <link rel="stylesheet" th:href="@{/css/orderdetail.css}">
   <title>MyPage myOrder</title>
</head>

<header th:replace="~{/include/header.html}"></header>

<body>
   <div class="container">
      <div class="profile-nav">
         <nav class="profile-nav-ul">
            <ul>
               <li class="profile-nav-p">마이페이지</li>

               <li><a th:href="@{/user/myOrder}">구매 내역</a></li>
               <!--구매 취소 내역 / 환불 내역-->
               <li><a th:href="@{/return}">반납 내역</a></li>
               <!--반납 신청 내역 / 반납 환불 내역-->
               <li><a th:href="@{/contract}">약정 내역</a></li>
               <!--약정 연장 내역 / 약정 해지 내역-->
            </ul>
         </nav>
      </div>
      <div class="profile-page">
         <div class="headerTextBox">
            <div>주문 제품</div>
         </div>
         <div id="wrap">
            <div class="productDetailInfoBox" th:each="cont, contIndex : ${order.contractList}">
               <div class="productInfoBox">
                  <div class="productRightDiv">
                     <div>
                        <img th:src="'data:' + ${cont.product.imageType} + ';base64,' + ${cont.product.imageFile}"
                           alt="productImage" class="productDetailImage">
                     </div>
                     <div class="productFooterText">
                        <div class="footerText">
                           <div class="footerPriceText" th:if="${cont.contractYear == 0}">구입가</div>
                           <div class="footerPriceText" th:if="${cont.contractYear != 0}">월 렌탈료</div>
                        </div>
                     </div>
                  </div>
                  <div class="productTextBox">
                     <div th:text="${cont.product.productModel}" class="detailModel">모델</div>
                     <div th:text="${cont.product.productName}" class="detailName">이름</div>
                     <div th:if="${cont.contractYear != 0}" th:text="${cont.contractYear} + '년 약정'"
                        class="detailYear">약정정보</div>
                     <div th:if="${cont.contractYear == 0}" class="detailYear">즉시 구매</div>
                  </div>
                  <div class="detailPriceDiv">
                     <div class="pricePushbox"></div>
                     <div class="footerPriceText2" th:if="${cont.contractYear == 0}"><span
                           th:text="${#numbers.formatInteger(cont.contractPrice, 0, 'COMMA')} + '원'"
                           class="spanText"></span></div>
                     <div class="footerPriceText2" th:if="${cont.contractYear != 0}"><span
                           th:text="'월 ' + ${#numbers.formatInteger(cont.contractPrice, 0, 'COMMA')} + '원'"
                           class="spanText"></span></div>
                  </div>
               </div>
               <div class="DetailButtonBox">
                  <div class="bottomButtonBox">
                     <div class="detailButton">
                        <form method="post" action="" th:if="${cont.stateType == 0}">
                           <input type="hidden" name="" method="post">
                           <button class="returnButton">환불하기</button>
                        </form>
                        <form method="post" action="" th:if="${cont.stateType == 1 and cont.endDate < today}">
                           <input type="hidden" name="" method="post">
                           <button class="returnButton">해지하기</button>
                        </form>
                        <form method="post" action="" th:if="${cont.stateType == 1 and today < cont.endDate}">
                           <input type="hidden" name="" method="post">
                           <button class="returnButton">반납하기</button>
                        </form>
                        <div th:if="${cont.stateType == 2}">반납 신청</div>
                        <div th:if="${cont.stateType == 3}">해지 신청</div>
                        <div th:if="${cont.stateType == 4}">환불 신청</div>
                        <div th:if="${cont.stateType == 5}">반납 진행중</div>
                        <div th:if="${cont.stateType == 6}">해지 진행중</div>
                        <div th:if="${cont.stateType == 7}">환불 진행중</div>
                        <div th:if="${cont.stateType == 8}">반납 완료</div>
                        <div th:if="${cont.stateType == 9}">해지 완료</div>
                        <div th:if="${cont.stateType == 10}">환불 완료</div>
                        
                        <button class="basketButton">장바구니 담기</button>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
   integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
   crossorigin="anonymous"></script>

</html>